{"remainingRequest":"C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\81426\\Desktop\\jingdong\\src\\views\\shop\\Content.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\81426\\Desktop\\jingdong\\src\\views\\shop\\Content.vue","mtime":1690369927802},{"path":"C:\\Users\\81426\\Desktop\\jingdong\\babel.config.js","mtime":1690369923692},{"path":"C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\81426\\Desktop\\jingdong\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgdG9SZWZzLCB3YXRjaEVmZmVjdCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgeyB1c2VDb21tb25DYXJ0RWZmZWN0IH0gZnJvbSAnLi4vLi4vZWZmZWN0cy9jYXJ0RWZmZWN0cyc7CmNvbnN0IGNhdGVnb3JpZXMgPSBbewogIG5hbWU6ICflhajpg6jllYblk4EnLAogIHRhYjogJ2FsbCcKfSwgewogIG5hbWU6ICfnp5LmnYAnLAogIHRhYjogJ3NlY2tpbGwnCn0sIHsKICBuYW1lOiAn5paw6bKc5rC05p6cJywKICB0YWI6ICdmcnVpdCcKfV07CgovLyBUYWIg5YiH5o2i55u45YWz55qE6YC76L6RCmNvbnN0IHVzZVRhYkVmZmVjdCA9ICgpID0+IHsKICBjb25zdCBjdXJyZW50VGFiID0gcmVmKGNhdGVnb3JpZXNbMF0udGFiKTsKICBjb25zdCBoYW5kbGVUYWJDbGljayA9IHRhYiA9PiB7CiAgICBjdXJyZW50VGFiLnZhbHVlID0gdGFiOwogIH07CiAgcmV0dXJuIHsKICAgIGN1cnJlbnRUYWIsCiAgICBoYW5kbGVUYWJDbGljawogIH07Cn07CgovLyDliJfooajlhoXlrrnnm7jlhbPnmoTpgLvovpEKY29uc3QgdXNlQ3VycmVudExpc3RFZmZlY3QgPSAoY3VycmVudFRhYiwgc2hvcElkKSA9PiB7CiAgY29uc3QgY29udGVudCA9IHJlYWN0aXZlKHsKICAgIGxpc3Q6IFtdCiAgfSk7CiAgY29uc3QgZ2V0Q29udGVudERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICB2YXIgX3Jlc3VsdCRkYXRhOwogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0KGAvYXBpL3Nob3AvJHtzaG9wSWR9L3Byb2R1Y3RzYCwgewogICAgICB0YWI6IGN1cnJlbnRUYWIudmFsdWUKICAgIH0pOwogICAgaWYgKChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQuZXJybm8pID09PSAwICYmIHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQgIT09IHZvaWQgMCAmJiAoX3Jlc3VsdCRkYXRhID0gcmVzdWx0LmRhdGEpICE9PSBudWxsICYmIF9yZXN1bHQkZGF0YSAhPT0gdm9pZCAwICYmIF9yZXN1bHQkZGF0YS5sZW5ndGgpIHsKICAgICAgY29udGVudC5saXN0ID0gcmVzdWx0LmRhdGE7CiAgICB9CiAgfTsKICB3YXRjaEVmZmVjdCgoKSA9PiB7CiAgICBnZXRDb250ZW50RGF0YSgpOwogIH0pOwogIGNvbnN0IHsKICAgIGxpc3QKICB9ID0gdG9SZWZzKGNvbnRlbnQpOwogIHJldHVybiB7CiAgICBsaXN0CiAgfTsKfTsKCi8vIOi0reeJqei9puebuOWFs+mAu+i+kQpjb25zdCB1c2VDYXJ0RWZmZWN0ID0gKCkgPT4gewogIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKTsKICBjb25zdCB7CiAgICBjYXJ0TGlzdCwKICAgIGNoYW5nZUNhcnRJdGVtSW5mbwogIH0gPSB1c2VDb21tb25DYXJ0RWZmZWN0KCk7CiAgY29uc3QgY2hhbmdlU2hvcE5hbWUgPSAoc2hvcElkLCBzaG9wTmFtZSkgPT4gewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VTaG9wTmFtZScsIHsKICAgICAgc2hvcElkLAogICAgICBzaG9wTmFtZQogICAgfSk7CiAgfTsKICBjb25zdCBjaGFuZ2VDYXJ0SXRlbSA9IChzaG9wSWQsIHByb2R1Y3RJZCwgaXRlbSwgbnVtLCBzaG9wTmFtZSkgPT4gewogICAgY2hhbmdlQ2FydEl0ZW1JbmZvKHNob3BJZCwgcHJvZHVjdElkLCBpdGVtLCBudW0pOwogICAgY2hhbmdlU2hvcE5hbWUoc2hvcElkLCBzaG9wTmFtZSk7CiAgfTsKICBjb25zdCBnZXRQcm9kdWN0Q2FydENvdW50ID0gKHNob3BJZCwgcHJvZHVjdElkKSA9PiB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDsKICAgIHJldHVybiAoY2FydExpc3QgPT09IG51bGwgfHwgY2FydExpc3QgPT09IHZvaWQgMCB8fCAoX2NhcnRMaXN0JHNob3BJZCA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQgPT09IHZvaWQgMCB8fCAoX2NhcnRMaXN0JHNob3BJZCA9IF9jYXJ0TGlzdCRzaG9wSWQucHJvZHVjdExpc3QpID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQgPT09IHZvaWQgMCB8fCAoX2NhcnRMaXN0JHNob3BJZCA9IF9jYXJ0TGlzdCRzaG9wSWRbcHJvZHVjdElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZC5jb3VudCkgfHwgMDsKICB9OwogIHJldHVybiB7CiAgICBjYXJ0TGlzdCwKICAgIGNoYW5nZUNhcnRJdGVtLAogICAgZ2V0UHJvZHVjdENhcnRDb3VudAogIH07Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29udGVudCcsCiAgcHJvcHM6IFsnc2hvcE5hbWUnXSwKICBzZXR1cCgpIHsKICAgIGNvbnN0IHJvdXRlID0gdXNlUm91dGUoKTsKICAgIGNvbnN0IHNob3BJZCA9IHJvdXRlLnBhcmFtcy5pZDsKICAgIGNvbnN0IHsKICAgICAgY3VycmVudFRhYiwKICAgICAgaGFuZGxlVGFiQ2xpY2sKICAgIH0gPSB1c2VUYWJFZmZlY3QoKTsKICAgIGNvbnN0IHsKICAgICAgbGlzdAogICAgfSA9IHVzZUN1cnJlbnRMaXN0RWZmZWN0KGN1cnJlbnRUYWIsIHNob3BJZCk7CiAgICBjb25zdCB7CiAgICAgIGNoYW5nZUNhcnRJdGVtLAogICAgICBjYXJ0TGlzdCwKICAgICAgZ2V0UHJvZHVjdENhcnRDb3VudAogICAgfSA9IHVzZUNhcnRFZmZlY3QoKTsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3JpZXMsCiAgICAgIGN1cnJlbnRUYWIsCiAgICAgIGhhbmRsZVRhYkNsaWNrLAogICAgICBsaXN0LAogICAgICBzaG9wSWQsCiAgICAgIGNoYW5nZUNhcnRJdGVtLAogICAgICBjYXJ0TGlzdCwKICAgICAgZ2V0UHJvZHVjdENhcnRDb3VudAogICAgfTsKICB9Cn07"},{"version":3,"names":["reactive","ref","toRefs","watchEffect","useRoute","useStore","get","useCommonCartEffect","categories","name","tab","useTabEffect","currentTab","handleTabClick","value","useCurrentListEffect","shopId","content","list","getContentData","_result$data","result","errno","data","length","useCartEffect","store","cartList","changeCartItemInfo","changeShopName","shopName","commit","changeCartItem","productId","item","num","getProductCartCount","_cartList$shopId","productList","count","props","setup","route","params","id"],"sources":["C:\\Users\\81426\\Desktop\\jingdong\\src\\views\\shop\\Content.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"category\">\n      <div\n        :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\n        v-for=\"item in categories\"\n        :key=\"item.name\"\n        @click=\"() => handleTabClick(item.tab)\"\n      >\n        {{item.name}}\n      </div>\n    </div>\n    <div class=\"product\">\n      <div\n        class=\"product__item\"\n        v-for=\"item in list\"\n        :key=\"item._id\"\n      >\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__sales\">月售 {{item.sales}} 件</p>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span\n            class=\"product__number__minus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, -1, shopName) }\"\n          >&#xe691;</span>\n            {{getProductCartCount(shopId, item._id)}}\n          <span\n            class=\"product__number__plus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, 1, shopName) }\"\n          >&#xe668;</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, toRefs, watchEffect } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { get } from '../../utils/request'\nimport { useCommonCartEffect } from '../../effects/cartEffects'\n\nconst categories = [\n  { name: '全部商品', tab: 'all' },\n  { name:'秒杀', tab: 'seckill' },\n  { name: '新鲜水果', tab: 'fruit'}\n]\n\n// Tab 切换相关的逻辑\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab)\n  const handleTabClick = (tab) => {\n    currentTab.value = tab\n  }\n  return { currentTab, handleTabClick}\n}\n\n// 列表内容相关的逻辑\nconst useCurrentListEffect = (currentTab, shopId) => {\n  const content = reactive({ list: [] })\n  const getContentData = async () => {\n    const result = await get(`/api/shop/${shopId}/products`, {\n      tab: currentTab.value\n    })\n    if(result?.errno === 0 && result?.data?.length) {\n      content.list = result.data;\n    }\n  }\n  watchEffect(() => { getContentData() })\n  const { list } = toRefs(content)\n  return { list }\n}\n\n// 购物车相关逻辑\nconst useCartEffect = () => {\n  const store = useStore()\n  const { cartList, changeCartItemInfo } = useCommonCartEffect()\n  const changeShopName = (shopId, shopName) => {\n    store.commit('changeShopName', { shopId, shopName })\n  }\n  const changeCartItem = (shopId, productId, item, num, shopName) => {\n    changeCartItemInfo(shopId, productId, item, num)\n    changeShopName(shopId, shopName)\n  }\n  const getProductCartCount = (shopId, productId) => {\n    return cartList?.[shopId]?.productList?.[productId]?.count || 0\n  }\n  return { cartList, changeCartItem, getProductCartCount }\n}\n\nexport default {\n  name: 'Content',\n  props: ['shopName'],\n  setup() {\n    const route = useRoute()\n    const shopId = route.params.id\n    const { currentTab, handleTabClick } = useTabEffect()\n    const { list } = useCurrentListEffect(currentTab, shopId)\n    const { changeCartItem, cartList, getProductCartCount } = useCartEffect()\n    return {\n      categories, currentTab, handleTabClick, list,\n      shopId, changeCartItem, cartList, getProductCartCount\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n.content {\n  display: flex;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 1.5rem;\n  bottom: .5rem;\n}\n.category {\n  overflow-y: scroll;\n  height: 100%;\n  width: .76rem;\n  background: $search-bgColor;\n  &__item {\n    line-height: .4rem;\n    text-align: center;\n    font-size: .14rem;\n    color: #333;\n    &--active {\n      background: $bgColor;\n    }\n  }\n}\n.product {\n  overflow-y: scroll;\n  flex: 1;\n  &__item {\n    position: relative;\n    display: flex;\n    padding: .12rem 0;\n    margin: 0 .16rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: .68rem;\n      height: .68rem;\n      margin-right: .16rem;\n    }\n    &__title {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__sales {\n      margin: .06rem 0;\n      font-size: .12rem;\n      color: $content-fontcolor;\n    }\n    &__price {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $hightlight-fontColor;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      line-height: .2rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .12rem;\n      line-height: .18rem;\n      &__minus {\n        position:relative;\n        top: .02rem;\n        color: $medium-fontColor;\n        margin-right: .05rem;\n      }\n      &__plus {\n        position:relative;\n        top: .02rem;\n        color: $btn-bgColor;\n        margin-left: .05rem;\n      }\n    }\n  }\n  \n}\n</style>\n"],"mappings":"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"}]}